<!DOCTYPE html>
<html lang="en-GB">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>CityZen - Technical report</title>
  <link rel="stylesheet" href="scholarly.css">
  <link rel="stylesheet" href="node_modules/prismjs/themes/prism-coy.css">
  <script src="node_modules/prismjs/prism.js" defer></script>
</head>

<body prefix="schema: http://schema.org/ xsd: http://www.w3.org/2001/XMLSchema# sa: https://ns.science.ai/">
  <header>
    <p class="title">CityZen</p>
    <p class="subtitle">Technical report</p>
  </header>
  <article id="what" typeof="schema:ScholarlyArticle" resource="#">
    <h1>CityZen Web Application</h1>
    <section>
      <ol>
        <li property="schema:author" typeof="sa:ContributorRole">
          <a property="schema:author" href="http://cityzendev.azurewebsites.net" typeof="schema:Person">
            <span property="schema:givenName">Alexandru</span>
            <span property="schema:familyName">Asofroniei</span>
          </a>
        </li>
        <li property="schema:contributor" typeof="sa:ContributorRole">
          <a property="schema:contributor" href="https://cityzen1.azurewebsites.net" typeof="schema:Person">
            <span property="schema:givenName">Eduard</span>
            <span property="schema:familyName">Dragoi</span>
          </a>
        </li>
      </ol>
    </section>

    <section typeof="sa:Abstract" id="abstract">
      <h2>Abstract</h2>
      <p>
        Cityzen is a project developed for the Services Oriented Architecture course. The purpose of this document is to describe
        every detail regarding the Cityzen application. Starting with the overall design and branding, and continuing with
        use cases, technical details and architecture.
      </p>
    </section>
    <section typeof="sa:MaterialsAndMethods" id="overview">
      <h2>Overview</h2>
      <p>Nowadays, everybody encounters different problems in the city, from wholes in the street to fallen billboards or blocked
        roads. The need of an application that centralizes these problems is big and the people are opened to such an aplication,
        given the fact that most of us are always connected to our smartphone.</p>
      <p>CityZen is a web based application where users can report different kinds of problems, and authorities can see these
        problems and resolve them, or comment them.</p>
      <p>CityZen's main objectives are:</p>
      <ul>
        <li>provide a web based application for users to report problems;</li>
        <li>notify the authorities about the problems newly added by users;</li>
        <li>help users know if the problems still exist or got resolved;</li>
        <li>provide statistics about the problems, such as how many users encountered the same problem or how much time it took
          for a problem to be resolver</li>
      </ul>



      <p>
        This is not solely a loss for the high principles of knowledge sharing in science, it also has very immediate pragmatic consequences.
        Any tool, any service that tries to integrate with scholarly publishing has to spend the brunt of its complexity
        (or budget) extracting data the author would have willingly shared out of antiquated formats. This places stringent
        limits on the improvement of the scholarly toolbox, on the discoverability of scientific knowledge, and particularly
        on processes of meta-analysis.
      </p>
      <p>
        To address these issues, we have followed an approach rooted in established best practices for the reuse of open, standard
        formats. The «HTML Vernacular» body of practice provides guidelines for the creation of domain-specific data formats
        that make use of HTML’s inherent extensibility (<a href="#ref-vernacular" property="schema:citation">Science.AI,
          2015b</a>). Using the vernacular foundation overlaid with «schema.org» metadata we have produced a format for the
        interchange of scholarly articles built on open standards, ready for all to use.
      </p>
      <p>
        Our high-level goals were:
      </p>
      <ul>
        <li>
          Uncompromisingly enabling structured metadata, accessibility, and internationalisation.
        </li>
        <li>
          Pragmatically working in Web browsers, even if it occasionally incurs some markup overhead.
        </li>
        <li>
          Powerfully customisable for inclusion in arbitrary Web sites, while remaining easy to process and interoperable.
        </li>
        <li>
          Entirely built on top of open, royalty-free standards.
        </li>
        <li>
          Long-term viability as a data format.
        </li>
      </ul>
    </section>
    <section typeof="sa:Results" id="design">
      <h2>Design</h2>
      <p>
        In the design of the user experience, we aimed for simple, ease of use and accessibility. We created a light design using
        only one accent color. The application was designed with responsiveness as a main goal, facilitating ease of use
        on any type of device (mobile or computer).
      </p>
      <section id="branding">
        <h3>Branding</h3>
        <p>The logo is a representation of a clean city surrounded by a circle. The main idea is to reprezent a city where people
          help one another and are opened to resolve problems in a fast and efficient manner.
        </p>
        <figure typeof="sa:Image">
          <img src="assets/logo.png">
          <figcaption>CityZen logo</figcaption>
        </figure>
      </section>
      <section id="ux">
        <h3>Website structure</h3>
        <p>
          In the interest of keeping the application as simple and easy to use as possible, we have created a familiar design, where
          each post is a self contained entity.
        </p>
        <P>
          The first page in this application is the login page. Here, users can authenticate using their facebook account, or they
          can create a new account only for the application. Admins or authorities will make a request by mail, providing
          some proof that they are really authorities.
        </p>
        <figure typeof="sa:Image">
          <img src="assets/login.png">
          <figcaption>Wireframe of the login page</figcaption>
        </figure>
        <p>
          After loging in, the users will be redirected to the posts page. This is the page where all the posts will appear, added
          by users or posts from Facebook that have tagged the CitiZen page. Every post can be upvoted and shared on a multitude
          of social media sites, depending on the user's preference. The posts will be ordered by the number of upvotes.
          The user can select a post to view details about it, opening the Post Page, can add a post by clicking the Add
          post button and can filter for specific posts in the website.
        </p>
        <figure typeof="sa:Image">
          <img src="assets/postspage.png">
          <figcaption>Wireframe of the posts page</figcaption>
        </figure>
        <p>
          By clicking the Add post button, a user can submit a post with a problem he encountered. Other users can access the post
          page to comment, upvote or share it. Each post will have a status (unapproved, unresolved, resolved). Authorities
          will have a "Mark as approved" and "Mark as resolved" button to change the status of the problem in the post when
          they solve it.
        </p>
        <p>
          The statistics page will offer the user the possibilty to view, the most upvoted posts, the ratio of resolved problems, and
          the popularity of reported issues.
        </p>
        <figure typeof="sa:Image">
          <img src="assets/statistics.png">
          <figcaption>Wireframe of the statistics page</figcaption>
        </figure>

      </section>

      <section id="Use cases">
        <h3>Use cases</h3>
        <p>We have designed the following use cases.</p>
        <h4>1. User registration</h4>
        <p>In order for a user to perform an action other than viewing posts he will have to be logged in. If he doesnt have
          an account, he will have to register and the application provides three methods to do this. A new user can register
          via facebook, google or the classic way, by completing a form with the users details.</p>
        <p>Steps that need to be performed when registering with Facebook:</p>
        <ul>
          <li>Click the button corresponding with the desired authentication method, Facebook.</li>
          <li>At this point he will be redirected to the authentication provider's page, where he will have to authorize our
            application.
          </li>
          <li>If the authorization is succesful he will be redirected to the main page.</li>
          <li>If the authorization is unsuccesful he will be redirected back to the registration page where an error will be
            displayed.
          </li>
        </ul>
        <h4>2. Logging in</h4>
        <p>When a user desires to interact with our website in other ways than just viewing posts he will need to be logged
          in. This login process is different based on the user's registration method.</p>
        <ul>
          <li>On the main page click the button in the top right corner symbolizing a user.</li>
          <li>On the login page choose the method of authentication, if it is by Google or Facebook, or complete the username
            and password.</li>
          <li>Upon clicking the login, Facebook or Google button, if the user exists he will be logged in.</li>
        </ul>
        <h4>3. Adding a post</h4>
        <p>Besides automatically getting posts from social media, our application also provides users with the ability to create
          a new post on the platform</p>
        <ul>
          <li>On the main page a user clicks the "Add a post" button.</li>
          <li>He is redirected to a new page that gives him the option to add a new post containing rich media(videos, photos).</li>
          <li>The user will fill in the information he wants to share</li>
          <li>The user will click the submit button when he finished creating the post</li>
          <li>The system will save the post and add it to the queue.</li>
        </ul>
        <h4>4. Marking an issue as resolved</h4>
        <p>Our application gives authorities the posibility to mark issues as resolved when they have done so.</p>
        <ul>
          <li>An admin user will click on the post that needs to be marked as resolved.</li>
          <li>The system will check the status of the post. If the status is approved then the post will have a "Mark as resolved"
            button</p>
            <li>On the post page he will click the button that marks the post as resolved .</li>
            <li>The system will mark the post as resolved in the queue and display it with the according style.</li>
        </ul>
        <h4>5. Viewing statistics</h4>
        <p>Admin users have the ability to view statistics regarding posts, users and user activity on the website.</p>
        <ul>
          <li>Admin users will click the button that symbolises statistics in the upper right corner.</li>
          <li>They will be directed to a page containing three tabs with statistics regarding posts and users.</li>
          <li>They will select the desired tab.</li>
          <li>The system will display the relevant statistics in the form of graphs and raw text.</li>
          <li>Users will then apply filters to the data.</li>
          <li>Users will export the data in their desired format for further analysis.</li>
        </ul>
      </section>

      <section id="architecture">
        <h3>Application architecture</h3>
        <p>
        Our application is composed of four main modules: Data Layer, User Management, Post Management and Reporting.
        </p>
        <figure typeof="sa:Image">
          <img src="assets/soa.png">
          <figcaption>Basic representation of the modules and how they interact.</figcaption>
        </figure>



        <section id="data">
          <h3>Data layer</h3>
          <p>
            The data layer is responsible with saving, updating and getting data from the database. The data layer contains the following data structures:
          </p>
          <ul>
              <li>ApplicationUser</li>
              <p>
            ApplicationUser defines the information stored regarding the application's users. This includes the username, email, password, address and city. This class is used by the User Mangement module.
          </p>
              <li>Category</li>
              <p>
            This class defines the categories used in creating a new post.
          </p>
              <li>Comment</li>
              <p>
                This class contains the comment text, number of upvotes, a isImportant property (used to differentiate comments made by authorities) and the date.
              </p>
              <li>Post</li>
              <p>
                The post class contains the following properties: title, description, photo, address, city, date added, date resolved, upvotes, approval status, resolve status.
              </p>
              <li>UserCommentUpvotes</li>
              <p>
                This class is used to track the comment upvotes performed by users.
              </p>
              <li>UserPostUpvotes</li>
              <p>
                This class is used to track the post upvotes performed by users.
              </p>
          </ul>
    
          
        </section>
        <section id="modules">
          <h3>Submodules</h3>
            <h4>User Management</h4>
            <p>
              The user management module contains the following submodules: register, login, external login. User management is implemented using the ASP.NET Identity system.
            </p>
            <p>
              The login submodule consumes a username and password and generates a login token, that can be used to access application functions that are restricted.
            </p>
            <p>
              The register submodule takes as argument user data and sends it to the data layer for saving.
            </p>
            <p>
              The external login is done using Facebook's Login. The integration is made using ASP.NET Identity provided functionality.
            </p>
            <h4>Post Management</h4>
            <p>
              Post Management is partitioned in: add post, add comment, post state change.
              The add post submodule is responsible for validating collecting new post data, validating it and send it to the data layer.
              The add comment receives the post context and the comment to be added. After validation the data is sent to the data layer.
              The post change state contains logic that changes the upvote number, resolve status and approve status.
            </p>
            <h4>Reporting</h4>
            <p>The reporting module receives data from the data layer, and uses it to generate statistics and present it to the user.</p>
        </section>
        <section id="externaldata">
          <h3>External data sources</h3>
          <p>
            We use the Facebook login API to allow users to register and login by using their Facebook account.
          </p>
          <p>
            We offer users the ability to share posts to social media websites. The scope of this is to increase awarness of issues through social media.
          </p>
          <p>
            We use the Google Maps API to allow users to pin point issues easier by autocompleting the location fields.
          </p>
        </section>

      </section>
    </section>
    <section typeof="sa:ReferenceList" id="references">
      <h2>References</h2>
      <dl>
        <dt>James Falkner, 2016</dt>
        <dd id="ref-nyt" typeof="schema:ScholarlyArticle" resource="https://developers.redhat.com/blog/2016/11/07/microservices-comparing-diy-with-apache-camel/">
          <cite property="schema:name"><a
              href="https://developers.redhat.com/blog/2016/11/07/microservices-comparing-diy-with-apache-camel/">Microservices: Comparing DIY with Apache Camel</a></cite>, by
          <span property="schema:author" typeof="schema:Person">
              <span property="schema:name">James Falkner</span>
          </span>;
          <time property="schema:datePublished" datetime="2016-11" datatype="xsd:gYearMonth">2016 Nov</time>.
        </dd>
        <dt>Microsoft, 2016</dt>
        <dd id="ref-sa-ontology" typeof="schema:ScholarlyArticle" resource="https://www.asp.net/identity">
          <cite property="schema:name"><a
              href="https://www.asp.net/identity">Getting started with ASP.NET Identity</a></cite>, by
          <span property="schema:author" typeof="schema:Person">
              <span property="schema:name">Microsoft</span>
          </span>;
          <time property="schema:datePublished" datetime="2016-01" datatype="xsd:gYearMonth">2016 Jan</time>.
        </dd>
        
      </dl>
    </section>
  </article>
  <footer>
    <p>
      <a href="http://creativecommons.org/licenses/by/4.0/">CC-BY</a>
      <a href="https://twitter.com/sciencedotai">@sciencedotai</a> •
      <a href="https://github.com/scienceai/scholarly.vernacular.io">Contribute</a> • Brought to you by the
      <a href="http://science.ai/"><img src="sciencedotai.svg" alt="science.ai logo" height="20px"></a>
      League of JStice
    </p>
  </footer>
</body>

</html>
